<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 500">
  <defs>
    <linearGradient id="bgRPV" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0a0a1a"/>
      <stop offset="100%" style="stop-color:#0a2e1a"/>
    </linearGradient>
    
    <linearGradient id="greenRPV" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#10b981"/>
      <stop offset="100%" style="stop-color:#34d399"/>
    </linearGradient>
    
    <linearGradient id="pinkRPV" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#ec4899"/>
      <stop offset="100%" style="stop-color:#f472b6"/>
    </linearGradient>
    
    <linearGradient id="cyanRPV" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#06b6d4"/>
      <stop offset="100%" style="stop-color:#22d3ee"/>
    </linearGradient>
    
    <filter id="shadowRPV">
      <feDropShadow dx="0" dy="4" stdDeviation="6" flood-color="rgba(0,0,0,0.4)"/>
    </filter>
    
    <pattern id="gridRPV" width="20" height="20" patternUnits="userSpaceOnUse">
      <path d="M 20 0 L 0 0 0 20" fill="none" stroke="rgba(255,255,255,0.02)" stroke-width="1"/>
    </pattern>
    
    <marker id="arrowRPV" markerWidth="10" markerHeight="7" refX="8" refY="3.5" orient="auto">
      <path d="M0,0 L10,3.5 L0,7 Z" fill="url(#greenRPV)"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="900" height="500" fill="url(#bgRPV)"/>
  <rect width="900" height="500" fill="url(#gridRPV)"/>
  
  <!-- Title -->
  <text x="450" y="40" text-anchor="middle" font-family="'Inter', sans-serif" font-size="28" font-weight="700" fill="white">
    Reverse Process: Step-by-Step
  </text>
  
  <!-- Single step visualization -->
  <g transform="translate(450, 200)">
    <text y="-130" text-anchor="middle" font-family="'Inter', sans-serif" font-size="16" font-weight="600" fill="url(#greenRPV)">
      One Denoising Step: xâ‚œ â†’ xâ‚œâ‚‹â‚
    </text>
    
    <!-- Input xâ‚œ -->
    <g transform="translate(-280, 0)">
      <rect x="-70" y="-70" width="140" height="140" rx="16" fill="rgba(255,255,255,0.05)" stroke="rgba(255,255,255,0.3)" stroke-width="2" filter="url(#shadowRPV)"/>
      <g fill="rgba(255,255,255,0.5)">
        <circle cx="-30" cy="-30" r="6"/><circle cx="25" cy="-32" r="5"/>
        <circle cx="-35" cy="22" r="5"/><circle cx="30" cy="30" r="6"/>
        <circle cx="0" cy="0" r="7"/><circle cx="-18" cy="10" r="5"/>
        <circle cx="15" cy="-15" r="5"/><circle cx="5" cy="35" r="5"/>
      </g>
      <text y="100" text-anchor="middle" font-family="'JetBrains Mono', monospace" font-size="18" fill="rgba(255,255,255,0.7)">xâ‚œ</text>
    </g>
    
    <!-- Arrow to U-Net -->
    <path d="M -180,0 L -100,0" stroke="rgba(255,255,255,0.3)" stroke-width="3" marker-end="url(#arrowRPV)"/>
    
    <!-- U-Net box -->
    <g transform="translate(0, 0)">
      <rect x="-90" y="-60" width="180" height="120" rx="16" fill="rgba(236,72,153,0.15)" stroke="#f472b6" stroke-width="2" filter="url(#shadowRPV)"/>
      <text y="-25" text-anchor="middle" font-family="'Inter', sans-serif" font-size="16" font-weight="700" fill="white">U-Net</text>
      <text y="0" text-anchor="middle" font-family="'JetBrains Mono', monospace" font-size="14" fill="#f9a8d4">ÎµÎ¸(xâ‚œ, t)</text>
      <text y="25" text-anchor="middle" font-family="'Inter', sans-serif" font-size="11" fill="rgba(255,255,255,0.5)">Predict noise</text>
      
      <!-- Timestep input -->
      <rect x="-40" y="35" width="80" height="25" rx="6" fill="rgba(236,72,153,0.3)"/>
      <text y="52" text-anchor="middle" font-family="'JetBrains Mono', monospace" font-size="11" fill="#fda4af">t = timestep</text>
    </g>
    
    <!-- Arrow from U-Net -->
    <path d="M 100,0 L 180,0" stroke="url(#greenRPV)" stroke-width="3" marker-end="url(#arrowRPV)"/>
    
    <!-- Output xâ‚œâ‚‹â‚ -->
    <g transform="translate(280, 0)">
      <rect x="-70" y="-70" width="140" height="140" rx="16" fill="rgba(16,185,129,0.15)" stroke="#34d399" stroke-width="2" filter="url(#shadowRPV)"/>
      <circle cy="-5" r="35" fill="rgba(251,191,36,0.5)"/>
      <circle cx="-12" cy="-10" r="5" fill="rgba(30,30,46,0.6)"/>
      <circle cx="12" cy="-10" r="5" fill="rgba(30,30,46,0.6)"/>
      <g fill="rgba(255,255,255,0.4)">
        <circle cx="-40" cy="-40" r="4"/><circle cx="38" cy="-35" r="4"/>
      </g>
      <text y="100" text-anchor="middle" font-family="'JetBrains Mono', monospace" font-size="18" fill="#34d399">xâ‚œâ‚‹â‚</text>
    </g>
  </g>
  
  <!-- Sampling formula -->
  <g transform="translate(450, 370)">
    <rect x="-380" y="-50" width="760" height="100" rx="14" fill="rgba(6,182,212,0.1)" stroke="rgba(6,182,212,0.3)" stroke-width="1"/>
    
    <text x="0" y="-25" text-anchor="middle" font-family="'Inter', sans-serif" font-size="14" font-weight="600" fill="url(#cyanRPV)">ğŸ”„ DDPM Sampling Step</text>
    <text x="0" y="5" text-anchor="middle" font-family="'JetBrains Mono', monospace" font-size="16" fill="white">xâ‚œâ‚‹â‚ = (1/âˆšÎ±â‚œ)(xâ‚œ - Î²â‚œ/âˆš(1-á¾±â‚œ)Â·ÎµÎ¸) + Ïƒâ‚œÂ·z</text>
    <text x="0" y="35" text-anchor="middle" font-family="'Inter', sans-serif" font-size="12" fill="rgba(255,255,255,0.5)">where z ~ ğ’©(0, I) and Ïƒâ‚œ = âˆšÎ²â‚œ (or âˆšÎ²Ìƒâ‚œ)</text>
  </g>
  
  <!-- Key points -->
  <g transform="translate(450, 470)">
    <text x="-300" y="0" font-family="'Inter', sans-serif" font-size="12" fill="rgba(255,255,255,0.5)">âœ¨ Start from pure noise</text>
    <text x="-50" y="0" font-family="'Inter', sans-serif" font-size="12" fill="rgba(255,255,255,0.5)">ğŸ” Repeat T times</text>
    <text x="180" y="0" font-family="'Inter', sans-serif" font-size="12" fill="rgba(255,255,255,0.5)">ğŸ¨ Get clean image!</text>
  </g>
</svg>
