<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 500">
  <defs>
    <linearGradient id="bgCGD" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0a0a1a"/>
      <stop offset="100%" style="stop-color:#1a0a28"/>
    </linearGradient>
    
    <linearGradient id="blueCGD" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#3b82f6"/>
      <stop offset="100%" style="stop-color:#60a5fa"/>
    </linearGradient>
    
    <linearGradient id="pinkCGD" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#ec4899"/>
      <stop offset="100%" style="stop-color:#f472b6"/>
    </linearGradient>
    
    <linearGradient id="greenCGD" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#10b981"/>
      <stop offset="100%" style="stop-color:#34d399"/>
    </linearGradient>
    
    <filter id="shadowCGD">
      <feDropShadow dx="0" dy="4" stdDeviation="6" flood-color="rgba(0,0,0,0.4)"/>
    </filter>
    
    <pattern id="gridCGD" width="20" height="20" patternUnits="userSpaceOnUse">
      <path d="M 20 0 L 0 0 0 20" fill="none" stroke="rgba(255,255,255,0.02)" stroke-width="1"/>
    </pattern>
    
    <marker id="arrowCGD" markerWidth="10" markerHeight="7" refX="8" refY="3.5" orient="auto">
      <path d="M0,0 L10,3.5 L0,7 Z" fill="url(#greenCGD)"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="900" height="500" fill="url(#bgCGD)"/>
  <rect width="900" height="500" fill="url(#gridCGD)"/>
  
  <!-- Title -->
  <text x="450" y="40" text-anchor="middle" font-family="'Inter', sans-serif" font-size="28" font-weight="700" fill="white">
    Classifier Guidance Pipeline
  </text>
  
  <!-- Flow diagram -->
  <g transform="translate(450, 250)">
    
    <!-- Noisy image input -->
    <g transform="translate(-350, 0)">
      <rect x="-70" y="-70" width="140" height="140" rx="16" fill="rgba(255,255,255,0.05)" stroke="rgba(255,255,255,0.3)" stroke-width="2" filter="url(#shadowCGD)"/>
      <g fill="rgba(255,255,255,0.5)">
        <circle cx="-25" cy="-25" r="6"/><circle cx="20" cy="-28" r="5"/>
        <circle cx="-30" cy="20" r="5"/><circle cx="25" cy="25" r="6"/>
        <circle cx="0" cy="0" r="7"/><circle cx="-15" cy="12" r="5"/>
      </g>
      <text y="95" text-anchor="middle" font-family="'JetBrains Mono', monospace" font-size="14" fill="rgba(255,255,255,0.6)">xâ‚œ</text>
      <text y="115" text-anchor="middle" font-family="'Inter', sans-serif" font-size="10" fill="rgba(255,255,255,0.4)">Noisy image</text>
    </g>
    
    <!-- Arrows to models -->
    <path d="M -260,0 L -180,-60" stroke="rgba(255,255,255,0.3)" stroke-width="2"/>
    <path d="M -260,0 L -180,60" stroke="rgba(255,255,255,0.3)" stroke-width="2"/>
    
    <!-- Diffusion model -->
    <g transform="translate(-100, -80)">
      <rect x="-80" y="-40" width="160" height="80" rx="14" fill="rgba(59,130,246,0.15)" stroke="url(#blueCGD)" stroke-width="2" filter="url(#shadowCGD)"/>
      <text y="-10" text-anchor="middle" font-family="'Inter', sans-serif" font-size="13" font-weight="600" fill="white">Diffusion Model</text>
      <text y="12" text-anchor="middle" font-family="'JetBrains Mono', monospace" font-size="11" fill="#93c5fd">ÎµÎ¸(xâ‚œ, t)</text>
    </g>
    
    <!-- Classifier -->
    <g transform="translate(-100, 80)">
      <rect x="-80" y="-40" width="160" height="80" rx="14" fill="rgba(236,72,153,0.15)" stroke="url(#pinkCGD)" stroke-width="2" filter="url(#shadowCGD)"/>
      <text y="-10" text-anchor="middle" font-family="'Inter', sans-serif" font-size="13" font-weight="600" fill="white">Noisy Classifier</text>
      <text y="12" text-anchor="middle" font-family="'JetBrains Mono', monospace" font-size="11" fill="#f9a8d4">âˆ‡ log pÏ†(y|xâ‚œ)</text>
    </g>
    
    <!-- Arrows to combination -->
    <path d="M 0,-80 L 80,-30" stroke="url(#blueCGD)" stroke-width="2"/>
    <path d="M 0,80 L 80,30" stroke="url(#pinkCGD)" stroke-width="2"/>
    
    <!-- Combination -->
    <g transform="translate(130, 0)">
      <rect x="-60" y="-50" width="120" height="100" rx="14" fill="rgba(16,185,129,0.15)" stroke="url(#greenCGD)" stroke-width="2" filter="url(#shadowCGD)"/>
      <text y="-20" text-anchor="middle" font-family="'Inter', sans-serif" font-size="12" font-weight="600" fill="white">Combine</text>
      <text y="5" text-anchor="middle" font-family="'JetBrains Mono', monospace" font-size="10" fill="#86efac">ÎµÌƒ = Îµ - wÏƒâˆ‡</text>
      <text y="25" text-anchor="middle" font-family="'JetBrains Mono', monospace" font-size="10" fill="#86efac">log p(y|xâ‚œ)</text>
    </g>
    
    <!-- Arrow to output -->
    <path d="M 200,0 L 280,0" stroke="url(#greenCGD)" stroke-width="3" marker-end="url(#arrowCGD)"/>
    
    <!-- Output -->
    <g transform="translate(350, 0)">
      <rect x="-70" y="-70" width="140" height="140" rx="16" fill="rgba(16,185,129,0.15)" stroke="#34d399" stroke-width="3" filter="url(#shadowCGD)"/>
      <circle cy="-10" r="35" fill="rgba(251,191,36,0.8)"/>
      <circle cx="-12" cy="-15" r="5" fill="#1e1e2e"/>
      <circle cx="12" cy="-15" r="5" fill="#1e1e2e"/>
      <path d="M -8,5 Q 0,15 8,5" fill="none" stroke="#1e1e2e" stroke-width="3"/>
      <rect x="-20" y="30" width="40" height="18" rx="4" fill="rgba(16,185,129,0.8)"/>
      <text y="95" text-anchor="middle" font-family="'JetBrains Mono', monospace" font-size="14" fill="#34d399">xâ‚€|"cat"</text>
      <text y="115" text-anchor="middle" font-family="'Inter', sans-serif" font-size="10" fill="rgba(255,255,255,0.4)">Conditional sample</text>
    </g>
  </g>
  
  <!-- Class label input -->
  <g transform="translate(350, 380)">
    <rect x="-60" y="-20" width="120" height="40" rx="10" fill="rgba(245,158,11,0.2)" stroke="#fbbf24" stroke-width="2"/>
    <text y="5" text-anchor="middle" font-family="'Inter', sans-serif" font-size="12" font-weight="600" fill="#fcd34d">y = "cat"</text>
  </g>
  <path d="M 350,360 L 350,330" stroke="#fbbf24" stroke-width="2" stroke-dasharray="5,3"/>
  
  <!-- Key point -->
  <g transform="translate(450, 460)">
    <text x="0" y="0" text-anchor="middle" font-family="'Inter', sans-serif" font-size="12" fill="rgba(255,255,255,0.5)">
      ðŸ’¡ Classifier must be trained on noisy images at all noise levels!
    </text>
  </g>
</svg>
