<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 400">
  <defs>
    <marker id="consLossArrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#4facfe"/>
    </marker>
    <marker id="targetArrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#f5576c"/>
    </marker>
    <linearGradient id="timeGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#667eea"/>
      <stop offset="100%" style="stop-color:#f5576c"/>
    </linearGradient>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="400" fill="#1a1a2e"/>
  
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" fill="#fff" font-size="18" font-weight="bold" font-family="Arial">
    Solution Consistency Loss (from Paper Figure 2)
  </text>
  
  <!-- Main trajectory line -->
  <line x1="100" y1="200" x2="700" y2="200" stroke="url(#timeGrad)" stroke-width="3"/>
  
  <!-- Time labels -->
  <text x="100" y="240" text-anchor="middle" fill="#667eea" font-size="12" font-weight="bold" font-family="Arial">t = 0</text>
  <text x="100" y="260" text-anchor="middle" fill="#888" font-size="10" font-family="Arial">(Data)</text>
  
  <text x="700" y="240" text-anchor="middle" fill="#f5576c" font-size="12" font-weight="bold" font-family="Arial">t = 1</text>
  <text x="700" y="260" text-anchor="middle" fill="#888" font-size="10" font-family="Arial">(Noise)</text>
  
  <!-- Three key points: s < l < t -->
  <circle cx="200" cy="200" r="15" fill="#667eea"/>
  <text x="200" y="205" text-anchor="middle" fill="#fff" font-size="10" font-weight="bold" font-family="Arial">s</text>
  <text x="200" y="180" text-anchor="middle" fill="#667eea" font-size="11" font-family="Arial">target</text>
  
  <circle cx="400" cy="200" r="15" fill="#9b59b6"/>
  <text x="400" y="205" text-anchor="middle" fill="#fff" font-size="10" font-weight="bold" font-family="Arial">l</text>
  <text x="400" y="180" text-anchor="middle" fill="#9b59b6" font-size="11" font-family="Arial">intermediate</text>
  
  <circle cx="600" cy="200" r="15" fill="#f5576c"/>
  <text x="600" y="205" text-anchor="middle" fill="#fff" font-size="10" font-weight="bold" font-family="Arial">t</text>
  <text x="600" y="180" text-anchor="middle" fill="#f5576c" font-size="11" font-family="Arial">current</text>
  
  <!-- State labels on trajectory -->
  <text x="200" y="275" text-anchor="middle" fill="#ccc" font-size="10" font-family="Arial">x_s (unknown)</text>
  <text x="400" y="275" text-anchor="middle" fill="#ccc" font-size="10" font-family="Arial">x_l</text>
  <text x="600" y="275" text-anchor="middle" fill="#ccc" font-size="10" font-family="Arial">x_t</text>
  
  <!-- Direct prediction arrow: x_t → x_s -->
  <path d="M 600 160 Q 400 80, 200 160" stroke="#4facfe" stroke-width="3" fill="none" marker-end="url(#consLossArrow)"/>
  <rect x="340" y="60" width="120" height="35" rx="5" fill="#16213e" stroke="#4facfe" stroke-width="1"/>
  <text x="400" y="80" text-anchor="middle" fill="#4facfe" font-size="10" font-weight="bold" font-family="Arial">f_θ(x_t, t, s)</text>
  <text x="400" y="92" text-anchor="middle" fill="#ccc" font-size="8" font-family="Arial">(direct)</text>
  
  <!-- Indirect: x_l → x_s via stop-grad target -->
  <path d="M 400 185 Q 300 140, 200 185" stroke="#f5576c" stroke-width="2" fill="none" stroke-dasharray="5,3" marker-end="url(#targetArrow)"/>
  <text x="300" y="130" text-anchor="middle" fill="#f5576c" font-size="9" font-family="Arial">f_θ(x_l, l, s)</text>
  <text x="300" y="145" text-anchor="middle" fill="#ff6b6b" font-size="8" font-family="Arial">[stop_gradient]</text>
  
  <!-- Loss equation box -->
  <rect x="150" y="310" width="500" height="70" rx="10" fill="#16213e" stroke="#51cf66" stroke-width="2"/>
  <text x="400" y="340" text-anchor="middle" fill="#51cf66" font-size="14" font-weight="bold" font-family="Arial">Consistency Loss</text>
  <text x="400" y="365" text-anchor="middle" fill="#fff" font-size="12" font-family="Arial">
    L_cons = || f_θ(x_t, t, s) - sg[f_θ(x_l, l, s)] ||²
  </text>
  
  <!-- Key insight -->
  <text x="400" y="395" text-anchor="middle" fill="#888" font-size="10" font-family="Arial">
    Both paths should reach the same destination → self-consistency!
  </text>
</svg>

