<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 450">
  <defs>
    <linearGradient id="bgSDS" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0a1628"/>
      <stop offset="100%" style="stop-color:#1a0a28"/>
    </linearGradient>
    <linearGradient id="renderGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#f093fb"/>
      <stop offset="100%" style="stop-color:#f5576c"/>
    </linearGradient>
    <linearGradient id="diffusionGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#667eea"/>
      <stop offset="100%" style="stop-color:#764ba2"/>
    </linearGradient>
    <linearGradient id="gradGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#22c55e"/>
      <stop offset="100%" style="stop-color:#10b981"/>
    </linearGradient>
    <filter id="glowSDS">
      <feGaussianBlur stdDeviation="3" result="blur"/>
      <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>
    <marker id="arrowSDS" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="rgba(255,255,255,0.5)"/>
    </marker>
    <marker id="arrowGreen" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e"/>
    </marker>
  </defs>
  
  <rect width="900" height="450" fill="url(#bgSDS)"/>
  
  <text x="450" y="35" text-anchor="middle" font-family="system-ui" font-size="22" font-weight="700" fill="white" filter="url(#glowSDS)">
    Score Distillation Sampling (SDS) Pipeline
  </text>
  <text x="450" y="60" text-anchor="middle" font-family="system-ui" font-size="12" fill="rgba(255,255,255,0.6)">
    Use 2D diffusion model to guide 3D optimization
  </text>
  
  <!-- 3D Representation (NeRF) -->
  <g transform="translate(100, 200)">
    <rect x="-70" y="-70" width="140" height="140" rx="12" fill="rgba(240,147,251,0.1)" stroke="url(#renderGrad)" stroke-width="2"/>
    <text y="-45" text-anchor="middle" font-family="system-ui" font-size="12" font-weight="600" fill="#f5a5c9">3D Representation</text>
    
    <!-- 3D cube -->
    <g transform="translate(0, 10)">
      <polygon points="-20,-30 20,-30 30,-15 -10,-15" fill="rgba(240,147,251,0.3)" stroke="#f093fb"/>
      <polygon points="-20,-30 -10,-15 -10,15 -20,0" fill="rgba(240,147,251,0.4)" stroke="#f093fb"/>
      <polygon points="-10,-15 30,-15 30,15 -10,15" fill="rgba(240,147,251,0.5)" stroke="#f093fb"/>
    </g>
    
    <text y="55" text-anchor="middle" font-family="monospace" font-size="10" fill="rgba(255,255,255,0.5)">Î¸ (learnable)</text>
  </g>
  
  <!-- Render arrow -->
  <g transform="translate(200, 200)">
    <path d="M 0,0 L 60,0" stroke="rgba(255,255,255,0.4)" stroke-width="2" marker-end="url(#arrowSDS)"/>
    <text y="-10" x="30" text-anchor="middle" font-family="system-ui" font-size="10" fill="#f5a5c9">Render</text>
  </g>
  
  <!-- Rendered Image -->
  <g transform="translate(330, 200)">
    <rect x="-50" y="-50" width="100" height="100" rx="8" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.3)" stroke-width="2"/>
    <text y="-35" text-anchor="middle" font-family="system-ui" font-size="11" fill="white">Rendered</text>
    <text y="0" text-anchor="middle" font-family="system-ui" font-size="20">ğŸ“·</text>
    <text y="40" text-anchor="middle" font-family="monospace" font-size="10" fill="rgba(255,255,255,0.5)">x = g(Î¸, c)</text>
  </g>
  
  <!-- Add noise arrow -->
  <g transform="translate(405, 200)">
    <path d="M 0,0 L 50,0" stroke="rgba(255,255,255,0.4)" stroke-width="2" marker-end="url(#arrowSDS)"/>
    <text y="-10" x="25" text-anchor="middle" font-family="system-ui" font-size="9" fill="rgba(255,255,255,0.5)">+noise</text>
  </g>
  
  <!-- Noisy Image -->
  <g transform="translate(500, 200)">
    <rect x="-35" y="-35" width="70" height="70" rx="6" fill="rgba(102,126,234,0.2)" stroke="#667eea" stroke-width="1"/>
    <text y="5" text-anchor="middle" font-family="monospace" font-size="10" fill="#a5b4fc">x_t</text>
  </g>
  
  <!-- To Diffusion arrow -->
  <g transform="translate(555, 200)">
    <path d="M 0,0 L 50,0" stroke="rgba(255,255,255,0.4)" stroke-width="2" marker-end="url(#arrowSDS)"/>
  </g>
  
  <!-- Diffusion Model -->
  <g transform="translate(680, 200)">
    <rect x="-70" y="-80" width="140" height="160" rx="12" fill="rgba(102,126,234,0.1)" stroke="url(#diffusionGrad)" stroke-width="2"/>
    <text y="-55" text-anchor="middle" font-family="system-ui" font-size="12" font-weight="600" fill="#a5b4fc">2D Diffusion</text>
    <text y="-38" text-anchor="middle" font-family="system-ui" font-size="10" fill="rgba(255,255,255,0.5)">(frozen)</text>
    
    <!-- Model diagram -->
    <rect x="-50" y="-20" width="100" height="60" rx="6" fill="rgba(102,126,234,0.3)"/>
    <text y="15" text-anchor="middle" font-family="system-ui" font-size="11" fill="white">Îµ_Ï†(x_t, t, y)</text>
    
    <text y="60" text-anchor="middle" font-family="monospace" font-size="9" fill="rgba(255,255,255,0.5)">SD/SDXL/etc</text>
  </g>
  
  <!-- Text prompt input -->
  <g transform="translate(680, 90)">
    <rect x="-60" y="-25" width="120" height="50" rx="8" fill="rgba(251,191,36,0.1)" stroke="#fbbf24"/>
    <text y="5" text-anchor="middle" font-family="system-ui" font-size="11" fill="#fcd34d">ğŸ“ "A peacock"</text>
  </g>
  <path d="M 680,115 L 680,120" stroke="#fbbf24" stroke-width="1" marker-end="url(#arrowSDS)"/>
  
  <!-- Gradient computation (below) -->
  <g transform="translate(450, 360)">
    <rect x="-350" y="-40" width="700" height="75" rx="10" fill="rgba(34,197,94,0.1)" stroke="url(#gradGrad)" stroke-width="2"/>
    <text y="-15" text-anchor="middle" font-family="system-ui" font-size="12" font-weight="600" fill="#4ade80">SDS Gradient Computation</text>
    <text y="10" text-anchor="middle" font-family="serif" font-size="14" fill="rgba(255,255,255,0.8)">
      âˆ‡_Î¸ L_SDS = w(t) Â· (Îµ_Ï†(x_t; t, y) - Îµ) Â· âˆ‚g(Î¸,c)/âˆ‚Î¸
    </text>
    <text y="30" text-anchor="middle" font-family="system-ui" font-size="10" fill="rgba(255,255,255,0.5)">
      Gradient flows back through rendering to update 3D parameters
    </text>
  </g>
  
  <!-- Gradient feedback arrow -->
  <path d="M 450,320 L 450,280 L 100,280 L 100,270" stroke="#22c55e" stroke-width="2" stroke-dasharray="5,3" fill="none" marker-end="url(#arrowGreen)"/>
  <text x="275" y="275" text-anchor="middle" font-family="system-ui" font-size="10" fill="#4ade80">Update Î¸</text>
</svg>

