<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500">
  <defs>
    <linearGradient id="elboBg" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1a1a2e"/>
      <stop offset="100%" style="stop-color:#16213e"/>
    </linearGradient>
    <linearGradient id="logpGrad" x1="0%" y1="100%" x2="0%" y2="0%">
      <stop offset="0%" style="stop-color:#667eea"/>
      <stop offset="100%" style="stop-color:#764ba2"/>
    </linearGradient>
    <linearGradient id="elboGrad" x1="0%" y1="100%" x2="0%" y2="0%">
      <stop offset="0%" style="stop-color:#11998e"/>
      <stop offset="100%" style="stop-color:#38ef7d"/>
    </linearGradient>
    <linearGradient id="gapGrad" x1="0%" y1="100%" x2="0%" y2="0%">
      <stop offset="0%" style="stop-color:#ff416c"/>
      <stop offset="100%" style="stop-color:#ff4b2b"/>
    </linearGradient>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="500" fill="url(#elboBg)" rx="15"/>
  
  <!-- Title -->
  <text x="400" y="35" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="24" font-weight="bold">Understanding the ELBO</text>
  
  <!-- Main equation -->
  <g transform="translate(100, 60)">
    <rect x="0" y="0" width="600" height="60" rx="10" fill="#0d1b2a" stroke="#764ba2" stroke-width="2"/>
    <text x="300" y="25" text-anchor="middle" fill="#ffffff" font-size="16">log p(x) = ELBO + D_KL(q(z|x) || p(z|x))</text>
    <text x="120" y="48" fill="#764ba2" font-size="12">Evidence</text>
    <text x="280" y="48" fill="#38ef7d" font-size="12">Lower Bound</text>
    <text x="480" y="48" fill="#ff416c" font-size="12">Gap (≥ 0)</text>
  </g>
  
  <!-- Bar chart visualization -->
  <g transform="translate(100, 150)">
    <!-- Axis -->
    <line x1="50" y1="250" x2="550" y2="250" stroke="#ffffff" stroke-width="2"/>
    <text x="300" y="280" text-anchor="middle" fill="#aaaaaa" font-size="12">Different data points x</text>
    
    <!-- Bar 1 -->
    <g transform="translate(100, 0)">
      <rect x="0" y="50" width="60" height="200" fill="url(#logpGrad)" rx="3"/>
      <rect x="0" y="100" width="60" height="150" fill="url(#elboGrad)" rx="3"/>
      <rect x="0" y="50" width="60" height="50" fill="url(#gapGrad)" rx="3" opacity="0.7"/>
      <text x="30" y="270" text-anchor="middle" fill="#aaaaaa" font-size="10">x₁</text>
    </g>
    
    <!-- Bar 2 -->
    <g transform="translate(200, 0)">
      <rect x="0" y="30" width="60" height="220" fill="url(#logpGrad)" rx="3"/>
      <rect x="0" y="70" width="60" height="180" fill="url(#elboGrad)" rx="3"/>
      <rect x="0" y="30" width="60" height="40" fill="url(#gapGrad)" rx="3" opacity="0.7"/>
      <text x="30" y="270" text-anchor="middle" fill="#aaaaaa" font-size="10">x₂</text>
    </g>
    
    <!-- Bar 3 -->
    <g transform="translate(300, 0)">
      <rect x="0" y="80" width="60" height="170" fill="url(#logpGrad)" rx="3"/>
      <rect x="0" y="90" width="60" height="160" fill="url(#elboGrad)" rx="3"/>
      <rect x="0" y="80" width="60" height="10" fill="url(#gapGrad)" rx="3" opacity="0.7"/>
      <text x="30" y="270" text-anchor="middle" fill="#aaaaaa" font-size="10">x₃</text>
      <text x="30" y="-5" text-anchor="middle" fill="#38ef7d" font-size="9">tight!</text>
    </g>
    
    <!-- Bar 4 -->
    <g transform="translate(400, 0)">
      <rect x="0" y="40" width="60" height="210" fill="url(#logpGrad)" rx="3"/>
      <rect x="0" y="110" width="60" height="140" fill="url(#elboGrad)" rx="3"/>
      <rect x="0" y="40" width="60" height="70" fill="url(#gapGrad)" rx="3" opacity="0.7"/>
      <text x="30" y="270" text-anchor="middle" fill="#aaaaaa" font-size="10">x₄</text>
    </g>
    
    <!-- Legend -->
    <g transform="translate(500, 50)">
      <rect x="0" y="0" width="15" height="15" fill="url(#logpGrad)"/>
      <text x="20" y="12" fill="#764ba2" font-size="11">log p(x)</text>
      
      <rect x="0" y="25" width="15" height="15" fill="url(#elboGrad)"/>
      <text x="20" y="37" fill="#38ef7d" font-size="11">ELBO</text>
      
      <rect x="0" y="50" width="15" height="15" fill="url(#gapGrad)"/>
      <text x="20" y="62" fill="#ff416c" font-size="11">KL Gap</text>
    </g>
  </g>
  
  <!-- ELBO decomposition -->
  <g transform="translate(100, 430)">
    <rect x="0" y="0" width="600" height="55" rx="10" fill="#0d1b2a" stroke="#38ef7d" stroke-width="2"/>
    <text x="300" y="20" text-anchor="middle" fill="#ffffff" font-size="14">ELBO = E_q[log p(x|z)] - D_KL(q(z|x) || p(z))</text>
    <text x="150" y="42" fill="#4facfe" font-size="11">Reconstruction ↑</text>
    <text x="450" y="42" fill="#ff6b6b" font-size="11">Regularization (push q → prior)</text>
  </g>
</svg>


