<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 450">
  <defs>
    <linearGradient id="scoreBg" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0c0c1e"/>
      <stop offset="100%" style="stop-color:#1a1a3e"/>
    </linearGradient>
    <linearGradient id="manifoldGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#667eea"/>
      <stop offset="100%" style="stop-color:#764ba2"/>
    </linearGradient>
    <marker id="arrowScore" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#00f5d4"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="450" fill="url(#scoreBg)" rx="15"/>
  
  <!-- Title -->
  <text x="400" y="35" text-anchor="middle" fill="#ffffff" font-family="Arial, sans-serif" font-size="22" font-weight="bold">DAE ↔ Score Matching Connection</text>
  <text x="400" y="55" text-anchor="middle" fill="#aaaaaa" font-family="Arial, sans-serif" font-size="13">Denoising learns the gradient of log-density (score function)</text>
  
  <!-- Left panel: Manifold view -->
  <g transform="translate(50, 80)">
    <rect x="0" y="0" width="320" height="300" rx="10" fill="#0d1b2a" stroke="#667eea" stroke-width="2"/>
    <text x="160" y="25" text-anchor="middle" fill="#667eea" font-size="16" font-weight="bold">Manifold Perspective</text>
    
    <!-- Data manifold (curved line) -->
    <path d="M 40 200 Q 100 100 160 150 Q 220 200 280 120" stroke="url(#manifoldGrad)" stroke-width="6" fill="none"/>
    <text x="200" y="90" fill="#764ba2" font-size="11">Data manifold ℳ</text>
    
    <!-- Points on manifold -->
    <circle cx="70" cy="165" r="6" fill="#667eea"/>
    <circle cx="160" cy="150" r="6" fill="#667eea"/>
    <circle cx="250" cy="135" r="6" fill="#667eea"/>
    
    <!-- Noisy point off manifold -->
    <circle cx="160" cy="220" r="8" fill="#ff6b6b" stroke="#ffffff" stroke-width="2"/>
    <text x="180" y="235" fill="#ff6b6b" font-size="10">x̃ (noisy)</text>
    
    <!-- Denoising arrow (pointing to manifold) -->
    <path d="M 160 212 L 160 158" stroke="#00f5d4" stroke-width="3" marker-end="url(#arrowScore)"/>
    
    <!-- Score vector label -->
    <text x="130" y="185" fill="#00f5d4" font-size="11" font-weight="bold">r(x̃) - x̃</text>
    <text x="100" y="270" fill="#aaaaaa" font-size="10">Denoising direction = Score direction</text>
  </g>
  
  <!-- Right panel: Mathematical connection -->
  <g transform="translate(430, 80)">
    <rect x="0" y="0" width="320" height="300" rx="10" fill="#0d1b2a" stroke="#00f5d4" stroke-width="2"/>
    <text x="160" y="25" text-anchor="middle" fill="#00f5d4" font-size="16" font-weight="bold">Score Function</text>
    
    <!-- Tweedie's formula -->
    <g transform="translate(20, 50)">
      <rect x="0" y="0" width="280" height="50" rx="5" fill="#1a1a3e"/>
      <text x="140" y="22" text-anchor="middle" fill="#ffffff" font-size="13">Optimal denoiser (Tweedie):</text>
      <text x="140" y="42" text-anchor="middle" fill="#00f5d4" font-size="12">r*(x̃) = x̃ + σ² ∇ log p_σ(x̃)</text>
    </g>
    
    <!-- Score function -->
    <g transform="translate(20, 115)">
      <rect x="0" y="0" width="280" height="50" rx="5" fill="#1a1a3e"/>
      <text x="140" y="22" text-anchor="middle" fill="#ffffff" font-size="13">Score function:</text>
      <text x="140" y="42" text-anchor="middle" fill="#ffe66d" font-size="12">s(x) = ∇_x log p(x)</text>
    </g>
    
    <!-- Connection -->
    <g transform="translate(20, 180)">
      <rect x="0" y="0" width="280" height="50" rx="5" fill="#1a1a3e"/>
      <text x="140" y="22" text-anchor="middle" fill="#ffffff" font-size="13">Therefore:</text>
      <text x="140" y="42" text-anchor="middle" fill="#ff6b6b" font-size="12">∇ log p ≈ (r(x̃) - x̃) / σ²</text>
    </g>
    
    <!-- Implication -->
    <text x="160" y="260" text-anchor="middle" fill="#ffffff" font-size="12">DAE implicitly learns score!</text>
    <text x="160" y="280" text-anchor="middle" fill="#aaaaaa" font-size="11">→ Foundation for diffusion models</text>
  </g>
  
  <!-- Bottom: Connection to diffusion -->
  <g transform="translate(100, 395)">
    <rect x="0" y="0" width="600" height="45" rx="10" fill="#0d1b2a" stroke="#ff6b6b" stroke-width="2"/>
    <text x="300" y="18" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">DAE → Score Matching → Diffusion Models (DDPM, Stable Diffusion)</text>
    <text x="300" y="35" text-anchor="middle" fill="#aaaaaa" font-size="11">Multi-scale denoising = iterative score-based generation</text>
  </g>
</svg>


