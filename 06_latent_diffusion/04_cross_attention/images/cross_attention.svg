<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 750 280">
  <defs>
    <linearGradient id="queryGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#3B82F6"/>
      <stop offset="100%" style="stop-color:#6366F1"/>
    </linearGradient>
    <linearGradient id="keyGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#F59E0B"/>
      <stop offset="100%" style="stop-color:#EAB308"/>
    </linearGradient>
    <linearGradient id="valueGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#10B981"/>
      <stop offset="100%" style="stop-color:#059669"/>
    </linearGradient>
  </defs>
  
  <!-- Background -->
  <rect width="750" height="280" fill="#0F172A"/>
  
  <!-- Title -->
  <text x="375" y="25" font-family="system-ui, sans-serif" font-size="16" fill="#F1F5F9" text-anchor="middle" font-weight="bold">Cross-Attention: Text → Image</text>
  
  <!-- Image features (Query) -->
  <rect x="40" y="60" width="150" height="80" rx="10" fill="url(#queryGrad)"/>
  <text x="115" y="90" font-family="system-ui, sans-serif" font-size="11" fill="white" text-anchor="middle" font-weight="bold">Image Features</text>
  <text x="115" y="110" font-family="system-ui, sans-serif" font-size="10" fill="#BFDBFE" text-anchor="middle">→ Query (Q)</text>
  <text x="115" y="130" font-family="system-ui, sans-serif" font-size="9" fill="#93C5FD" text-anchor="middle">From U-Net</text>
  
  <!-- Text embeddings -->
  <rect x="40" y="160" width="150" height="80" rx="10" fill="url(#keyGrad)"/>
  <text x="115" y="190" font-family="system-ui, sans-serif" font-size="11" fill="white" text-anchor="middle" font-weight="bold">Text Embedding</text>
  <text x="115" y="210" font-family="system-ui, sans-serif" font-size="10" fill="#FEF3C7" text-anchor="middle">→ Key (K), Value (V)</text>
  <text x="115" y="230" font-family="system-ui, sans-serif" font-size="9" fill="#FDE68A" text-anchor="middle">From CLIP/T5</text>
  
  <!-- Attention computation -->
  <rect x="250" y="90" width="200" height="100" rx="12" fill="#1E293B" stroke="#8B5CF6" stroke-width="2"/>
  <text x="350" y="120" font-family="system-ui, sans-serif" font-size="11" fill="#A78BFA" text-anchor="middle" font-weight="bold">Cross-Attention</text>
  <text x="350" y="145" font-family="system-ui, sans-serif" font-size="10" fill="#F1F5F9" text-anchor="middle">Attn(Q,K,V) =</text>
  <text x="350" y="165" font-family="system-ui, sans-serif" font-size="10" fill="#F1F5F9" text-anchor="middle">softmax(QKᵀ/√d)V</text>
  
  <!-- Arrows to attention -->
  <line x1="195" y1="100" x2="245" y2="120" stroke="#3B82F6" stroke-width="2"/>
  <polygon points="245,120 238,113 236,122" fill="#3B82F6"/>
  
  <line x1="195" y1="190" x2="245" y2="160" stroke="#F59E0B" stroke-width="2"/>
  <polygon points="245,160 238,167 236,158" fill="#F59E0B"/>
  
  <!-- Output -->
  <rect x="520" y="100" width="180" height="80" rx="10" fill="url(#valueGrad)"/>
  <text x="610" y="130" font-family="system-ui, sans-serif" font-size="11" fill="white" text-anchor="middle" font-weight="bold">Conditioned Features</text>
  <text x="610" y="155" font-family="system-ui, sans-serif" font-size="10" fill="#D1FAE5" text-anchor="middle">Text-aware image features</text>
  <text x="610" y="175" font-family="system-ui, sans-serif" font-size="9" fill="#A7F3D0" text-anchor="middle">Back to U-Net</text>
  
  <!-- Arrow to output -->
  <line x1="455" y1="140" x2="515" y2="140" stroke="#64748B" stroke-width="2"/>
  <polygon points="515,140 505,135 505,145" fill="#64748B"/>
  
  <!-- Bottom note -->
  <text x="375" y="265" font-family="system-ui, sans-serif" font-size="10" fill="#64748B" text-anchor="middle" font-style="italic">Text tokens attend to spatial positions → "cat" activates cat-like regions</text>
</svg>

