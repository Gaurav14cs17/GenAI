<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1100 680">
  <defs>
    <linearGradient id="bg5" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0d0d0d"/>
      <stop offset="100%" style="stop-color:#2d2d44"/>
    </linearGradient>
    <filter id="glow5">
      <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
      <feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>
  </defs>
  
  <rect width="1100" height="680" fill="url(#bg5)"/>
  
  <!-- Title -->
  <text x="550" y="40" text-anchor="middle" font-family="'Segoe UI', sans-serif" font-size="32" font-weight="300" fill="white" letter-spacing="2">
    SDE FORMULATION â€” Song et al. (2021)
  </text>
  <text x="550" y="70" text-anchor="middle" font-family="'Segoe UI', sans-serif" font-size="14" fill="rgba(255,255,255,0.6)">
    Unified continuous-time framework: DDPM and NCSN as discretizations of SDEs
  </text>
  
  <!-- General Forward SDE -->
  <g transform="translate(550, 160)">
    <rect x="-480" y="-60" width="960" height="120" rx="15" fill="rgba(99,102,241,0.08)" stroke="rgba(99,102,241,0.5)" stroke-width="2"/>
    
    <text x="-430" y="-35" font-family="'Segoe UI', sans-serif" font-size="13" font-weight="600" fill="#6366f1">FORWARD SDE (Data â†’ Noise)</text>
    
    <text x="0" y="5" text-anchor="middle" font-family="Georgia, serif" font-size="24" fill="white" filter="url(#glow5)">
      dx = <tspan fill="#00c6ff">f(x, t)</tspan>dt + <tspan fill="#7c3aed">g(t)</tspan>dW<tspan baseline-shift="sub" font-size="16">t</tspan>
    </text>
    
    <text x="-200" y="45" font-family="'Segoe UI', sans-serif" font-size="11" fill="#00c6ff">drift coefficient</text>
    <text x="100" y="45" font-family="'Segoe UI', sans-serif" font-size="11" fill="#7c3aed">diffusion coefficient</text>
    <text x="300" y="45" font-family="'Segoe UI', sans-serif" font-size="11" fill="rgba(255,255,255,0.5)">Wiener process</text>
  </g>
  
  <!-- VP-SDE -->
  <g transform="translate(280, 320)">
    <rect x="-230" y="-70" width="460" height="140" rx="12" fill="rgba(0,198,255,0.08)" stroke="rgba(0,198,255,0.4)" stroke-width="1.5"/>
    <text x="0" y="-45" text-anchor="middle" font-family="'Segoe UI', sans-serif" font-size="13" font-weight="600" fill="#00c6ff">VP-SDE (Variance Preserving)</text>
    
    <text x="0" y="-15" text-anchor="middle" font-family="'Segoe UI', sans-serif" font-size="11" fill="rgba(255,255,255,0.6)">Used by DDPM (Ho et al. 2020):</text>
    
    <text x="0" y="15" text-anchor="middle" font-family="Georgia, serif" font-size="16" fill="white">
      f(x, t) = âˆ’Â½Î²(t)x
    </text>
    <text x="0" y="40" text-anchor="middle" font-family="Georgia, serif" font-size="16" fill="white">
      g(t) = âˆšÎ²(t)
    </text>
    
    <text x="0" y="65" text-anchor="middle" font-family="'Segoe UI', sans-serif" font-size="10" fill="rgba(255,255,255,0.5)">
      Perturbation kernel: p<tspan baseline-shift="sub" font-size="7">0t</tspan>(x<tspan baseline-shift="sub" font-size="7">t</tspan>|x<tspan baseline-shift="sub" font-size="7">0</tspan>) = N(Î±<tspan baseline-shift="sub" font-size="7">t</tspan>x<tspan baseline-shift="sub" font-size="7">0</tspan>, (1âˆ’Î±<tspan baseline-shift="sub" font-size="7">t</tspan>Â²)I)
    </text>
  </g>
  
  <!-- VE-SDE -->
  <g transform="translate(820, 320)">
    <rect x="-230" y="-70" width="460" height="140" rx="12" fill="rgba(124,58,237,0.08)" stroke="rgba(124,58,237,0.4)" stroke-width="1.5"/>
    <text x="0" y="-45" text-anchor="middle" font-family="'Segoe UI', sans-serif" font-size="13" font-weight="600" fill="#7c3aed">VE-SDE (Variance Exploding)</text>
    
    <text x="0" y="-15" text-anchor="middle" font-family="'Segoe UI', sans-serif" font-size="11" fill="rgba(255,255,255,0.6)">Used by NCSN (Song &amp; Ermon 2019):</text>
    
    <text x="0" y="15" text-anchor="middle" font-family="Georgia, serif" font-size="16" fill="white">
      f(x, t) = 0
    </text>
    <text x="0" y="40" text-anchor="middle" font-family="Georgia, serif" font-size="16" fill="white">
      g(t) = âˆš(dÏƒÂ²(t)/dt)
    </text>
    
    <text x="0" y="65" text-anchor="middle" font-family="'Segoe UI', sans-serif" font-size="10" fill="rgba(255,255,255,0.5)">
      Perturbation kernel: p<tspan baseline-shift="sub" font-size="7">0t</tspan>(x<tspan baseline-shift="sub" font-size="7">t</tspan>|x<tspan baseline-shift="sub" font-size="7">0</tspan>) = N(x<tspan baseline-shift="sub" font-size="7">0</tspan>, ÏƒÂ²(t)I)
    </text>
  </g>
  
  <!-- Marginal Distribution -->
  <g transform="translate(550, 470)">
    <rect x="-480" y="-50" width="960" height="100" rx="15" fill="rgba(0,0,0,0.4)" stroke="rgba(16,185,129,0.3)" stroke-width="1"/>
    
    <text x="-430" y="-25" font-family="'Segoe UI', sans-serif" font-size="13" font-weight="600" fill="#10b981">ğŸ“ MARGINAL DISTRIBUTIONS</text>
    
    <text x="-430" y="5" font-family="'Segoe UI', sans-serif" font-size="11" fill="rgba(255,255,255,0.6)">Time-dependent marginal:</text>
    <text x="-180" y="5" font-family="Georgia, serif" font-size="14" fill="white">
      p<tspan baseline-shift="sub" font-size="10">t</tspan>(x) = âˆ« p<tspan baseline-shift="sub" font-size="10">0t</tspan>(x|x<tspan baseline-shift="sub" font-size="10">0</tspan>) p<tspan baseline-shift="sub" font-size="10">data</tspan>(x<tspan baseline-shift="sub" font-size="10">0</tspan>) dx<tspan baseline-shift="sub" font-size="10">0</tspan>
    </text>
    
    <text x="-430" y="35" font-family="'Segoe UI', sans-serif" font-size="11" fill="rgba(255,255,255,0.6)">Boundary conditions:</text>
    <text x="-180" y="35" font-family="Georgia, serif" font-size="14" fill="white">
      p<tspan baseline-shift="sub" font-size="10">0</tspan>(x) = p<tspan baseline-shift="sub" font-size="10">data</tspan>(x),  p<tspan baseline-shift="sub" font-size="10">T</tspan>(x) â‰ˆ N(0, Ïƒ<tspan baseline-shift="sup" font-size="10">2</tspan>I)
    </text>
  </g>
  
  <!-- Score Function at time t -->
  <g transform="translate(550, 590)">
    <rect x="-480" y="-45" width="960" height="85" rx="15" fill="rgba(245,158,11,0.08)" stroke="rgba(245,158,11,0.4)" stroke-width="1.5"/>
    
    <text x="-430" y="-20" font-family="'Segoe UI', sans-serif" font-size="13" font-weight="600" fill="#f59e0b">SCORE AT TIME t</text>
    
    <text x="-200" y="5" font-family="Georgia, serif" font-size="16" fill="white">
      s<tspan baseline-shift="sub" font-size="11">Î¸</tspan>(x, t) â‰ˆ âˆ‡<tspan baseline-shift="sub" font-size="11">x</tspan> log p<tspan baseline-shift="sub" font-size="11">t</tspan>(x)
    </text>
    
    <text x="200" y="5" font-family="'Segoe UI', sans-serif" font-size="11" fill="rgba(255,255,255,0.6)">Trained with DSM at each noise level:</text>
    
    <text x="0" y="35" text-anchor="middle" font-family="Georgia, serif" font-size="14" fill="white">
      L = E<tspan baseline-shift="sub" font-size="10">t,x<tspan baseline-shift="sub" font-size="7">0</tspan>,Îµ</tspan>[Î»(t)||s<tspan baseline-shift="sub" font-size="10">Î¸</tspan>(x<tspan baseline-shift="sub" font-size="10">t</tspan>, t) âˆ’ âˆ‡<tspan baseline-shift="sub" font-size="10">x<tspan baseline-shift="sub" font-size="7">t</tspan></tspan> log p<tspan baseline-shift="sub" font-size="10">0t</tspan>(x<tspan baseline-shift="sub" font-size="10">t</tspan>|x<tspan baseline-shift="sub" font-size="10">0</tspan>)||Â²]
    </text>
  </g>
  
  <!-- Key insight -->
  <text x="550" y="665" text-anchor="middle" font-family="'Segoe UI', sans-serif" font-size="12" fill="rgba(255,255,255,0.5)">
    <tspan fill="#10b981">Unified view:</tspan> DDPM and NCSN are different discretizations of the same continuous-time framework!
  </text>
</svg>
